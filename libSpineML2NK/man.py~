    
from neurokernel.core_gpu import Manager
from neurokernel.tools.logging import setup_logger
from libSpineML2NK.LPU import LPU



""" Launch Neurokernel
"""


screen = True
logger = setup_logger(file_name='BasicExperiment_input.log', screen=screen)
############
man = Manager()
(n_dict, s_dict) = LPU.lpu_parser('BasicExperiment.gexf.gz')

print n_dict

print s_dict

man.add(LPU, 'spine_ml', 0.1, n_dict, s_dict,
            input_file='BasicExperiment_input.h5',
            output_file='BasicExperiment_output.h5',
            device=0, debug=True)


man.spawn()
man.start(100)
man.wait()
print "finished"


